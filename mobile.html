    1 <!DOCTYPE html>
    2 <html lang="ko">
    3 <head>
    4     <meta charset="UTF-8">
    5     <meta name="viewport" content="width=device-width,
      initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    6     <title>Jeju Mobile Weather</title>
    7     <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></
      script>
    8     <style>
    9         body { margin: 0; padding: 10px; background-color: #121212
      font-family: sans-serif; color: #fff; }
   10         .container { display: flex; flex-direction: column; gap:
      15px; padding-bottom: 50px; }
   11         .card { background: #1e1e1e; border-radius: 12px; overflow
      hidden; padding: 15px; }
   12         .title { font-size: 18px; font-weight: bold; margin-bottom
      10px; color: #eee; border-bottom: 1px solid #333; padding-bottom:
      8px; }
   13
   14         /* ë¹„ë””ì˜¤ ìŠ¤íƒ€ì¼ */
   15         .video-box { position: relative; width: 100%; aspect-ratio
      16/9; background: #000; margin-bottom: 10px; border-radius: 8px;
      overflow: hidden; }
   16         video { width: 100%; height: 100%; object-fit: cover; }
   17         .label { position: absolute; bottom: 5px; left: 8px;
      background: rgba(0,0,0,0.6); padding: 4px 8px; border-radius: 4px;
      font-size: 12px; font-weight: bold; }
   18
   19         /* ë‚ ì”¨ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
   20         .weather-row { display: flex; overflow-x: auto; gap: 0;
      padding-bottom: 10px; }
   21         .w-item { min-width: 60px; text-align: center; display:
      flex; flex-direction: column; align-items: center; }
   22         .w-time { font-size: 12px; color: #aaa; margin-bottom: 5px
      }
   23         .w-temp { font-size: 14px; font-weight: bold; margin-botto
      2px; }
   24         .w-rain { font-size: 11px; color: #4fc3f7; }
   25
   26         /* ë²„íŠ¼ */
   27         .btn { background: #d32f2f; color: white; padding: 12px;
      text-align: center; border-radius: 8px; text-decoration: none;
      font-weight: bold; display: block; margin-bottom: 10px; }
   28     </style>
   29 </head>
   30 <body>
   31     <div class="container">
   32         <a href="https://cors-anywhere.herokuapp.com/corsdemo"
      target="_blank" class="btn">âš ï¸ 1. ì—¬ê¸° ëˆŒëŸ¬ì„œ ê¶Œí•œ ìš”ì²­í•˜ê¸°</a>
   33
   34         <div class="card">
   35             <div class="title">ğŸ”´ ì œì£¼ ì‹¤ì‹œê°„ CCTV</div>
   36             <div class="video-box"><div class="label">ğŸï¸ ìš°ë„</div
      video id="v1" autoplay muted playsinline></video></div>
   37             <div class="video-box"><div class="label">ğŸ”ï¸ í•œë¼ì‚°</d
      ><video id="v2" autoplay muted playsinline></video></div>
   38         </div>
   39
   40         <div class="card" id="weather-area">
   41             <div class="title">â˜€ï¸ ì˜¤ëŠ˜ì˜ ë‚ ì”¨</div>
   42             <div id="weather-list">ë¡œë”©ì¤‘...</div>
   43         </div>
   44     </div>
   45
   46 <script>
   47     const API_KEY =
      '05988a053767a7a6cc5553d077ce7ea541c60806a0160d5ac2e9119ebe5a61ce'
   48     const PROXY = 'https://cors-anywhere.herokuapp.com/';
   49
   50     function initCCTV() {
   51         const streams = [
   52             { id: 'v1', url:
      'http://211.114.96.121:1935/jejusi7/11-24.stream/chunklist_w151488
      33.m3u8' },
   53             { id: 'v2', url:
      'http://119.65.216.155:1935/live/cctv03.stream_360p/chunklist_w324
      7178.m3u8' }
   54         ];
   55         if (Hls.isSupported()) {
   56             streams.forEach(s => {
   57                 const v = document.getElementById(s.id);
   58                 const h = new Hls(); h.loadSource(s.url);
      h.attachMedia(v);
   59             });
   60         }
   61     }
   62
   63     async function initWeather() {
   64         const nx=52, ny=38; // ì œì£¼ì‹œ ê¸°ì¤€
   65         const now = new Date();
   66         const ymd =
      `${now.getFullYear()}${String(now.getMonth()+1).padStart(2,'0')}${
      ring(now.getDate()).padStart(2,'0')}`;
   67         const baseTime = now.getHours() < 2 ? "2300" : "0200";
   68         const baseDate = now.getHours() < 2 ? String(Number(ymd)-1
      : ymd;
   69
   70         try {
   71             const url =
      `${PROXY}https://apis.data.go.kr/1360000/VilageFcstInfoService_2.0
      etVilageFcst?serviceKey=${API_KEY}&numOfRows=300&pageNo=1&dataType
      SON&base_date=${baseDate}&base_time=${baseTime}&nx=${nx}&ny=${ny}`
   72             const res = await fetch(url);
   73             const json = await res.json();
   74
   75             let html = '<div class="weather-row">';
   76             json.response.body.items.item.forEach(i => {
   77                 if(i.category === 'TMP' && i.fcstDate === ymd &&
      i.fcstTime >= "0900" && i.fcstTime <= "2100") {
   78                     const t = i.fcstTime.substring(0,2);
   79                     html += `<div class="w-item"><span class=
      "w-time">${t}ì‹œ</span><span class="w-temp">${i.fcstValue}Â°</span><
      div>`;
   80                 }
   81             });
   82             html += '</div>';
   83             document.getElementById('weather-list').innerHTML =
      html;
   84         } catch(e) {
   85             document.getElementById('weather-list').innerHTML = '<
      div style="color:red; text-align:center;">ë‚ ì”¨ ë¡œë”© ì‹¤íŒ¨<br>ìƒë‹¨ì˜
      ë¹¨ê°„ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>';
   86         }
   87     }
   88
   89     initCCTV();
   90     initWeather();
   91 </script>
   92 </body>
   93 </html>
